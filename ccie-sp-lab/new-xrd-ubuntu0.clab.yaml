name: ccie-sp-ubuntu0

mgmt:
  network: clab_mgmt
  ipv4-subnet: 172.31.0.0/24
  external-access: false


topology:
  kinds:
    xrd:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.11.2  
      

## Emerald AS-100

  nodes:
    x-p1:
      kind: xrd
      mgmt-ipv4: 172.31.0.201
      #startup-config: ccie-sp-base/X-P1.txt
    x-p2:
      kind: xrd
      mgmt-ipv4: 172.31.0.202
      #startup-config: ccie-sp-base/X-P2.txt
    x-p3:
      kind: xrd
      mgmt-ipv4: 172.31.0.203
      #startup-config: ccie-sp-base/X-P3.txt
    x-p4:
      kind: xrd
      mgmt-ipv4: 172.31.0.204
      #startup-config: ccie-sp-base/X-P4.txt
    x-asbr2:
      kind: xrd
      mgmt-ipv4: 172.31.0.242
      #startup-config: ccie-sp-base/X-ASBR2.txt
    x-asbr1:
      kind: xrd
      mgmt-ipv4: 172.31.0.241
      #startup-config: ccie-sp-base/X-ASBR1.txt
    x-pe5:
      kind: xrd
      mgmt-ipv4: 172.31.0.205
      #startup-config: ccie-sp-base/X-PE5.txt
    x-pe6:
      kind: xrd
      mgmt-ipv4: 172.31.0.206
      #startup-config: ccie-sp-base/X-PE6.txt

    x-rr1:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.251
      #startup-config: ccie-sp-base/X-RR1.txt
    x-rr2:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.252
      #startup-config: ccie-sp-base/X-RR2.txt


    x-ce1:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.41
      #startup-config: ccie-sp-base/X-CE1.txt
    x-ce2:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.42
      #startup-config: ccie-sp-base/X-CE2.txt
    x-ce4:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.44
      #startup-config: ccie-sp-base/X-CE4.txt
    x-ce5:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.45
      #startup-config: ccie-sp-base/X-CE5.txt

## Garnet AS-200

    y-asbr1:
      kind: xrd
      mgmt-ipv4: 172.31.0.141
      #startup-config: ccie-sp-base/Y-ASBR1.txt
    
    y-asbr2:
      kind: xrd
      mgmt-ipv4: 172.31.0.142
      #startup-config: ccie-sp-base/Y-ASBR2.txt

    


   


  links:

  # Emerald AS-100 Links
    - endpoints: [x-rr1:e0/1, x-p1:Gi0-0-0-3]  
    - endpoints: [x-rr2:e0/1, x-p2:Gi0-0-0-4]  

    - endpoints: [x-p1:Gi0-0-0-0, x-p2:Gi0-0-0-0]  
    - endpoints: [x-p1:Gi0-0-0-1, x-p3:Gi0-0-0-1]  
    - endpoints: [x-p1:Gi0-0-0-2, x-pe5:Gi0-0-0-0]  
    - endpoints: [x-p1:Gi0-0-0-4, x-p4:Gi0-0-0-4]  

    - endpoints: [x-p2:Gi0-0-0-2, x-asbr1:Gi0-0-0-0] 
    - endpoints: [x-p2:Gi0-0-0-1, x-p4:Gi0-0-0-2]  
    - endpoints: [x-p2:Gi0-0-0-5, x-p3:Gi0-0-0-4]
    
    - endpoints: [x-p4:Gi0-0-0-1, x-asbr2:Gi0-0-0-0]
    - endpoints: [x-p4:Gi0-0-0-0, x-p3:Gi0-0-0-0]
    
    - endpoints: [x-p3:Gi0-0-0-2, x-pe6:Gi0-0-0-0]

    - endpoints: [x-pe5:Gi0-0-0-1, x-pe6:Gi0-0-0-1]

    - endpoints: [x-asbr2:Gi0-0-0-2, x-asbr1:Gi0-0-0-1]
    
    - endpoints: [x-ce1:e0/1, x-pe5:Gi0-0-0-2]
    - endpoints: [x-ce1:e0/2, x-ce2:e0/2]
    - endpoints: [x-ce1:e0/3, x-pe6:Gi0-0-0-4]
    - endpoints: [x-ce2:e0/1, x-pe6:Gi0-0-0-2]
    - endpoints: [x-ce2:e0/3, x-pe5:Gi0-0-0-4]

    - endpoints: [x-ce4:e0/2, x-asbr1:Gi0-0-0-3]
    - endpoints: [x-ce4:e0/1, x-ce5:e0/1]
    - endpoints: [x-ce5:e0/2, x-asbr2:Gi0-0-0-4]

    # Garnet AS-200 Links

    - endpoints: [y-asbr1:Gi0-0-0-2, x-asbr1:Gi0-0-0-2]
    - endpoints: [y-asbr2:Gi0-0-0-2, x-asbr2:Gi0-0-0-1]

    - endpoints: [y-asbr1:Gi0-0-0-1, y-asbr2:Gi0-0-0-1]


    
    - endpoints: [y-p1:Gi0-0-0-2, y-p2:Gi0-0-0-0]
    - endpoints: [y-p1:Gi0-0-0-1, y-pe3:Gi0-0-0-2]
    - endpoints: [y-p1:Gi0-0-0-4, y-rr1:e0/1]
    - endpoints: [y-p1:Gi0-0-0-3, y-pe5:e0/1]
    - endpoints: [y-pe3:Gi0-0-0-3, y-rr2:e0/1]
    - endpoints: [y-pe5:e0/2, y-pe6:e0/2]
    - endpoints: [y-pe6:e0/1, y-p2:Gi0-0-0-2]

    # REMOTE LINKS
    # to .11
    - endpoints: [y-asbr1:Gi0-0-0-3, host:y-asbr1_g3_id17]
    - endpoints: [x-asbr1:Gi0-0-0-4, host:x-asbr1_g4_id18]
    - endpoints: [x-asbr2:Gi0-0-0-3, host:x-asbr2_g3_id19]

    # to .12

    - endpoints: [y-asbr2:Gi0-0-0-0, host:y-asbr2_to_p3_id2002]
    - endpoints: [y-asbr1:Gi0-0-0-0, host:y-asbr1_to_p1_id2001]




   
    # VXLAN Commands to be run after lab is deployed

    # sudo clab tools vxlan create --remote 10.253.11.11 --id 10 --link y-pe5_e3_id10
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 11 --link y-pe6_e3_id11
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 12 --link y-pe6_e11_id12
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 13 --link y-pe6_e10_id13
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 16 --link y-pe3_g5_id16

    # sudo clab tools vxlan create --remote 10.253.11.11 --id 19 --link x-asbr2_g3_id19

    # sudo clab tools vxlan create --remote 10.253.11.11 --id 18 --link x-asbr1_g4_id18
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 17 --link y-asbr1_g3_id17

    ### Remote y-pe4 links

    # sudo clab tools vxlan create --remote 10.253.11.11 --id 24 --link y-p2-pe4_id24
    # sudo clab tools vxlan create --remote 10.253.11.11 --id 34 --link y-pe3-pe4_id34
