username clab
 group root-lr
 group cisco-support
 secret clab@123
!
grpc
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
 port 9339
 no-tls
 address-family dual
!
{{- if .Env.CLAB_MGMT_VRF }}
vrf {{ .Env.CLAB_MGMT_VRF }}
 address-family ipv4 unicast
 !
 address-family ipv6 unicast
 !
{{- end}}
!
line default
  transport input ssh
!
netconf-yang agent
 ssh
!
interface MgmtEth0/RP0/CPU0/0
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
!
router static
{{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
{{- if .MgmtIPv4Gateway }}
 address-family ipv4 unicast
  0.0.0.0/0 MgmtEth0/RP0/CPU0/0 {{ .MgmtIPv4Gateway }}
  !
{{- end}}
{{- if .MgmtIPv6Gateway }}
 address-family ipv6 unicast
  ::/0 MgmtEth0/RP0/CPU0/0 {{ .MgmtIPv6Gateway }}
  !
{{- end}}
!
ssh server v2
{{- if .Env.CLAB_MGMT_VRF }}
ssh server vrf {{ .Env.CLAB_MGMT_VRF }}
{{- end}}
ssh server netconf {{ if .Env.CLAB_MGMT_VRF }} vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}
hostname BMR-Cloud
group CCIE-ISIS
 router isis '.*'
 router isis '.*'  is-type level-2-only
 router isis '.*'  log adjacency changes
 router isis '.*'  address-family ipv4 unicast
 router isis '.*'  address-family ipv4 unicast  metric-style wide
 router isis '.*'  address-family ipv6 unicast
 router isis '.*'  address-family ipv6 unicast  metric-style wide
 router isis '.*'  interface 'Loopback.*'
 router isis '.*'  interface 'Loopback.*'  passive
 router isis '.*'  interface 'Loopback.*'  address-family ipv4 unicast
 router isis '.*'  interface 'Loopback.*'  address-family ipv6 unicast
 router isis '.*'  interface 'Bundle-Ether.*'
 router isis '.*'  interface 'Bundle-Ether.*'  point-to-point
 router isis '.*'  interface 'Bundle-Ether.*'  address-family ipv4 unicast
 router isis '.*'  interface 'Bundle-Ether.*'  address-family ipv4 unicast  metric 200 level 2
 router isis '.*'  interface 'Bundle-Ether.*'  address-family ipv6 unicast
 router isis '.*'  interface 'Bundle-Ether.*'  address-family ipv6 unicast  metric 400 level 2
 router isis '.*'  interface 'GigabitEthernet.*'
 router isis '.*'  interface 'GigabitEthernet.*'  point-to-point
 router isis '.*'  interface 'GigabitEthernet.*'  address-family ipv4 unicast
 router isis '.*'  interface 'GigabitEthernet.*'  address-family ipv4 unicast  metric 200 level 2
 router isis '.*'  interface 'GigabitEthernet.*'  address-family ipv6 unicast
 router isis '.*'  interface 'GigabitEthernet.*'  address-family ipv6 unicast  metric 400 level 2
end-group
interface Loopback0
interface Loopback0 ipv4 address 5.0.100.1 255.255.255.255
interface Loopback0 ipv6 address 2620:fc7:5000::1/128
interface MgmtEth0/0/CPU0/0 ipv4 address 10.5.105.35 255.255.255.0
interface GigabitEthernet0/0/0/0 ipv4 address 10.30.3.1 255.255.255.0
interface GigabitEthernet0/0/0/0 ipv6 address 2620:fc7:3031::1/64
interface GigabitEthernet0/0/0/1 ipv4 address 10.40.4.1 255.255.255.0
interface GigabitEthernet0/0/0/1 ipv6 address 2620:fc7:4041::1/64
!
route-policy PASS
  pass
end-policy
!
router isis CORE apply-group CCIE-ISIS
router isis CORE
router isis CORE net 49.1005.0005.0000.0005.0001.00
router isis CORE address-family ipv4 unicast
router isis CORE interface Loopback0
router isis CORE interface GigabitEthernet0/0/0/0
router isis CORE interface GigabitEthernet0/0/0/1
router bgp 500
router bgp 500 bgp router-id 5.0.100.1
router bgp 500 bgp log neighbor changes detail
router bgp 500 address-family ipv4 unicast
router bgp 500 address-family ipv4 unicast network 5.0.100.1/32
router bgp 500 address-family ipv4 unicast allocate-label all
router bgp 500 address-family vpnv4 unicast
router bgp 500 address-family ipv6 unicast
router bgp 500 address-family vpnv6 unicast
router bgp 500 neighbor 10.30.3.3
router bgp 500 neighbor 10.30.3.3 remote-as 300
router bgp 500 neighbor 10.30.3.3 address-family ipv4 unicast
router bgp 500 neighbor 10.30.3.3 address-family ipv4 unicast route-policy PASS in
router bgp 500 neighbor 10.30.3.3 address-family ipv4 unicast route-policy PASS out
router bgp 500 neighbor 10.30.3.3 address-family ipv6 unicast
router bgp 500 neighbor 10.30.3.3 address-family ipv6 unicast route-policy PASS in
router bgp 500 neighbor 10.30.3.3 address-family ipv6 unicast route-policy PASS out
router bgp 500 neighbor 10.40.4.2
router bgp 500 neighbor 10.40.4.2 remote-as 400
router bgp 500 neighbor 10.40.4.2 address-family ipv4 unicast
router bgp 500 neighbor 10.40.4.2 address-family ipv4 unicast route-policy PASS in
router bgp 500 neighbor 10.40.4.2 address-family ipv4 unicast route-policy PASS out
router bgp 500 neighbor 10.40.4.2 address-family ipv6 unicast
router bgp 500 neighbor 10.40.4.2 address-family ipv6 unicast route-policy PASS in
router bgp 500 neighbor 10.40.4.2 address-family ipv6 unicast route-policy PASS out
lldp
end