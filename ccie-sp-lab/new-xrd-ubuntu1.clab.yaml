name: ccie-sp-ubuntu1

mgmt:
  network: clab_mgmt
  ipv4-subnet: 172.31.0.0/24
  external-access: false


topology:
  kinds:
    xrd:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.9.2  

  nodes:
  

    # Kayanite AS-300

    z-sr-pce1:
      kind: xrd
      mgmt-ipv4: 172.31.0.11
      startup-config: ccie-sp-base/Z-SR-PCE1.txt
    
    z-sr-pce2:
      kind: xrd
      mgmt-ipv4: 172.31.0.12
      startup-config: ccie-sp-base/Z-SR-PCE2.txt

    z-p1:
      kind: xrd
      mgmt-ipv4: 172.31.0.21
      startup-config: ccie-sp-base/Z-P1.txt
    
    z-p2:
      kind: xrd
      mgmt-ipv4: 172.31.0.22
      startup-config: ccie-sp-base/Z-P2.txt

    z-pe1:
      kind: xrd
      mgmt-ipv4: 172.31.0.61
      startup-config: ccie-sp-base/Z-PE1.txt

    z-pe2:
      kind: xrd
      mgmt-ipv4: 172.31.0.62
      startup-config: ccie-sp-base/Z-PE2.txt

    z-pe3:
      kind: xrd
      mgmt-ipv4: 172.31.0.63
      startup-config: ccie-sp-base/Z-PE3.txt

    z-pe4:
      kind: xrd
      mgmt-ipv4: 172.31.0.64
      startup-config: ccie-sp-base/Z-PE4.txt

    z-ce1:
      kind: xrd
      mgmt-ipv4: 172.31.0.71
      startup-config: ccie-sp-base/Z-CE1.txt

    z-ce2:
      kind: xrd
      mgmt-ipv4: 172.31.0.72
      startup-config: ccie-sp-base/Z-CE2.txt

    z-ce3:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.73
      startup-config: ccie-sp-base/Z-CE3.txt


  links:
    
  # Kayanite AS-300 Links
    - endpoints: [z-sr-pce1:Gi0-0-0-4, z-sr-pce2:Gi0-0-0-0] 
    - endpoints: [z-sr-pce1:Gi0-0-0-0, z-p1:Gi0-0-0-4] 
    - endpoints: [z-sr-pce1:Gi0-0-0-1, z-p2:Gi0-0-0-4] 

    - endpoints: [z-p2:Gi0-0-0-5, z-sr-pce2:Gi0-0-0-1] 
    - endpoints: [z-p2:Gi0-0-0-0, z-p1:Gi0-0-0-0]
    - endpoints: [z-p2:Gi0-0-0-1, z-pe2:Gi0-0-0-0] 
    - endpoints: [z-p2:Gi0-0-0-3, z-pe1:Gi0-0-0-4]
    - endpoints: [z-p2:Gi0-0-0-2, z-pe4:Gi0-0-0-0]

    - endpoints: [z-p1:Gi0-0-0-2, z-pe3:Gi0-0-0-0]
    - endpoints: [z-p1:Gi0-0-0-1, z-pe1:Gi0-0-0-0]
    - endpoints: [z-p1:Gi0-0-0-3, z-pe2:Gi0-0-0-4]

    - endpoints: [z-pe1:Gi0-0-0-2, z-pe3:Gi0-0-0-1]
    - endpoints: [z-pe1:Gi0-0-0-1, z-pe2:Gi0-0-0-1]
    - endpoints: [z-pe1:Gi0-0-0-3, z-ce3:e0/1]

    - endpoints: [z-pe2:Gi0-0-0-3, z-ce3:e0/2]
    - endpoints: [z-pe2:Gi0-0-0-2, z-pe4:Gi0-0-0-1]

    - endpoints: [z-ce1:Gi0-0-0-0, z-pe3:Gi0-0-0-2]
    - endpoints: [z-ce2:Gi0-0-0-0, z-pe4:Gi0-0-0-2]
    

    

    - endpoints: [z-sr-pce2:Gi0-0-0-2, host:z-sr-pce2_g2_id19]
    - endpoints: [z-sr-pce2:Gi0-0-0-3, host:z-sr-pce2_g3_id1000]

  
    - endpoints: [z-sr-pce1:Gi0-0-0-2, host:z-sr-pce1_g2_id18]
    - endpoints: [z-sr-pce1:Gi0-0-0-3, host:z-sr-pce1_g3_id17]


    # VXLAN Commands to be run after lab is deployed

    # sudo clab tools vxlan create --remote 10.253.11.1 --id 1000 --link z-asbr2_g3_id1000

    # sudo clab tools vxlan create --remote 10.253.11.10 --id 10 --link y-ce1_e1_id10
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 11 --link y-ce1_e2_id11
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 12 --link y-ce5_e1_id12
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 13 --link y-ce2_e1_id13
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 16 --link y-ce3_e2_id16

    # sudo clab tools vxlan create --remote 10.253.11.10 --id 19 --link z-asbr2_g2_id19

    # sudo clab tools vxlan create --remote 10.253.11.10 --id 18 --link z-sr-pce1_g2_id18
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 17 --link z-sr-pce1_g3_id17


    ### Remote y-pe4 links
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 24 --link y-pe4-p2_id24
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 34 --link y-pe4-pe3_id34



