name: ccie-sp-ubuntu2

mgmt:
  network: clab_mgmt
  ipv4-subnet: 172.31.0.0/24
  external-access: false


topology:
  kinds:
    xrd:
      kind: cisco_xrd
      image: ios-xr/xrd-control-plane:7.9.2  

  nodes:
  #Ruby AS-400
    Clould_Provider:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.16.1a
      mgmt-ipv4: 172.31.0.254
      startup-config: ccie-sp-base/Clould_Provider.txt

    w-pe1:
      kind: xrd
      mgmt-ipv4: 172.31.0.103
      startup-config: ccie-sp-base/W-PE1.txt

    w-pe2:
      kind: xrd
      mgmt-ipv4: 172.31.0.104
      startup-config: ccie-sp-base/W-PE2.txt

    w-pe3:
      kind: xrd
      mgmt-ipv4: 172.31.0.105
      startup-config: ccie-sp-base/W-PE3.txt

    w-p1:
      kind: xrd
      mgmt-ipv4: 172.31.0.101
      startup-config: ccie-sp-base/W-P1.txt

    w-p2:
      kind: xrd
      mgmt-ipv4: 172.31.0.102
      startup-config: ccie-sp-base/W-P2.txt

    w-ce1:
      kind: xrd
      mgmt-ipv4: 172.31.0.110
      startup-config: ccie-sp-base/W-CE1.txt

    w-ce2:
      kind: xrd
      mgmt-ipv4: 172.31.0.111
      startup-config: ccie-sp-base/W-CE2.txt

    w-ce3:
      kind: xrd
      mgmt-ipv4: 172.31.0.112
      startup-config: ccie-sp-base/W-CE3.txt

    w-ce4:
      kind: xrd
      mgmt-ipv4: 172.31.0.113
      startup-config: ccie-sp-base/W-CE4.txt

    


  links:
    - endpoints: [w-p1:Gi0-0-0-0, w-p2:Gi0-0-0-0]
    - endpoints: [w-p1:Gi0-0-0-5, w-p2:Gi0-0-0-5] 

    - endpoints: [w-p1:Gi0-0-0-1, w-pe1:Gi0-0-0-0]
    - endpoints: [w-p1:Gi0-0-0-2, w-pe2:Gi0-0-0-0]
    - endpoints: [w-p1:Gi0-0-0-3, w-pe3:Gi0-0-0-1]

    - endpoints: [w-p2:Gi0-0-0-3, w-pe1:Gi0-0-0-1]
    - endpoints: [w-p2:Gi0-0-0-2, w-pe2:Gi0-0-0-1]
    - endpoints: [w-p2:Gi0-0-0-1, w-pe3:Gi0-0-0-0]

    - endpoints: [w-pe1:Gi0-0-0-2, w-pe2:Gi0-0-0-2]
    - endpoints: [w-pe2:Gi0-0-0-3, w-pe3:Gi0-0-0-2]

    - endpoints: [w-pe1:Gi0-0-0-3, w-ce1:Gi0-0-0-1]
    - endpoints: [w-pe2:Gi0-0-0-5, w-ce1:Gi0-0-0-2]
    - endpoints: [w-pe2:Gi0-0-0-4, w-ce3:Gi0-0-0-0]
    - endpoints: [w-pe3:Gi0-0-0-3, w-ce2:Gi0-0-0-1]

    - endpoints: [w-pe3:Gi0-0-0-4, w-ce4:e0/1]

    - endpoints: [w-pe1:Gi0-0-0-4, Clould_Provider:e0/2]

    - endpoints: [host:ubuntu-1_id17, Clould_Provider:e0/1]

    

    # sudo clab tools vxlan create --remote 10.253.11.11 --id 1000 --link cloudProvider_g1_id1000

    # sudo clab tools vxlan create --remote 10.253.11.10 --id 2001 --link y-asbr1_to_p1_id2001
    # sudo clab tools vxlan create --remote 10.253.11.10 --id 2002 --link y-asbr2_to_p3_id2002

    




    
